# Use official PowerShell image
FROM mcr.microsoft.com/powershell:latest

# Metadata
LABEL maintainer="your-email@example.com"
LABEL description="PowerShell base image with SQL Server PowerShell modules installed"

# Install required PowerShell modules
RUN pwsh -Command `
    Set-PSRepository -Name "PSGallery" -InstallationPolicy Trusted; `
    Install-Module -Name SqlServer -Force -AllowClobber; `
    Install-Module -Name dbatools -Force -AllowClobber

# Default shell
CMD ["pwsh"]
